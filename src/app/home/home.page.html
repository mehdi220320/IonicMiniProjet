<!-- Main Content -->
<div class="ion-page" id="main-content">
  <ion-header>
    <ion-toolbar color="primary">
      <ion-buttons slot="start">
        <ion-menu-button auto-hide="false"></ion-menu-button>
      </ion-buttons>
      <ion-title>Marketplace</ion-title>
      <ion-buttons slot="end">
        <ion-button>
          <ion-badge color="danger" class="cart-badge">3</ion-badge>
          <ion-icon name="cart-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>

    <!-- Search Bar -->
    <ion-toolbar>
      <ion-searchbar
        placeholder="Search products..."
        animated="true"
        [(ngModel)]="searchQuery">
      </ion-searchbar>
    </ion-toolbar>
  </ion-header>

  <ion-content [fullscreen]="true">

    <!-- Categories Section -->
    <div class="categories-section">
      <h3 class="section-title">Categories</h3>
      <div class="categories-scroll">
        <ion-chip color="primary">
          <ion-icon name="laptop-outline"></ion-icon>
          <ion-label>Electronics</ion-label>
        </ion-chip>
        <ion-chip>
          <ion-icon name="shirt-outline"></ion-icon>
          <ion-label>Fashion</ion-label>
        </ion-chip>
        <ion-chip>
          <ion-icon name="home-outline"></ion-icon>
          <ion-label>Home</ion-label>
        </ion-chip>
        <ion-chip>
          <ion-icon name="book-outline"></ion-icon>
          <ion-label>Books</ion-label>
        </ion-chip>
        <ion-chip>
          <ion-icon name="basketball-outline"></ion-icon>
          <ion-label>Sports</ion-label>
        </ion-chip>
      </div>
    </div>

    <!-- Featured Banner -->
    <div class="featured-banner">
      <ion-card class="banner-card">
        <img src="https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?w=800&h=400&fit=crop" alt="Featured">
        <div class="banner-content">
          <h2>Special Offer</h2>
          <p>Up to 50% off on selected items</p>
          <ion-button size="small" color="light">Shop Now</ion-button>
        </div>
      </ion-card>
    </div>

    <!-- Product Grid -->
    <div class="products-section">
      <div class="section-header">
        <h3 class="section-title">Featured Products</h3>
        <ion-button fill="clear" size="small">
          See All
          <ion-icon name="chevron-forward-outline" slot="end"></ion-icon>
        </ion-button>
      </div>

      <!-- Loading State -->
      @if (products.length === 0) {
        <div class="loading-container">
          <ion-spinner name="crescent"></ion-spinner>
        </div>
      } @else {
        <div class="products-grid">
          @for (product of products; track product.id) {
            <ion-card class="product-card" (click)="goToDetail(product.id!)" button>
              <div class="product-image">
                <img [src]="product.imageUri" alt="Product image" />
                <ion-button class="wishlist-btn" fill="clear" size="small">
                  <ion-icon name="heart-outline"></ion-icon>
                </ion-button>
              </div>
              <ion-card-content>
                <h4>{{ product.name }}</h4>
                <div class="rating">
                  <ion-icon name="star" color="warning"></ion-icon>
                  <ion-icon name="star" color="warning"></ion-icon>
                  <ion-icon name="star" color="warning"></ion-icon>
                  <ion-icon name="star" color="warning"></ion-icon>
                  <ion-icon name="star-outline" color="warning"></ion-icon>
                  <span>(4.5)</span>
                </div>
                <div class="price-section">
                  <span class="price">${{ product.price }}</span>
                  <ion-button size="small" fill="solid">
                    <ion-icon name="cart-outline" slot="icon-only"></ion-icon>
                  </ion-button>
                </div>
              </ion-card-content>
            </ion-card>


      }
        </div>
      }
    </div>
  </ion-content>
</div>
